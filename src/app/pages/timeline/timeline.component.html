<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start" *ngIf="settlement$ | async">
      <ion-back-button defaultHref="/kdm/settlements/{{settlement.id}}"></ion-back-button>
    </ion-buttons>
    <ion-title>
      Timeline
    </ion-title>
    <ion-buttons slot="end">
      <ion-button size="small" fill="clear" (click)="addTimelineEvent()">
        <ion-icon name="add-circle"></ion-icon>
      </ion-button>
      <ion-button size="small" fill="clear" (click)="changeReorder()">
        {{reorderActivityName}}
      </ion-button>
    </ion-buttons>
  </ion-toolbar>
</ion-header>

<ion-content padding>
  <ion-list>
    <ion-item-group> <!--reorder="{{reorderFlag}}" (ionItemReorder)="reorderItems($event)">   -->
      <ion-item-sliding *ngFor="let timelineevent of timeline">
        <ion-item>
          <ion-checkbox [(ngModel)]="timelineevent.reached"
                        (click)="timelineReached($event, timelineevent)"></ion-checkbox>
          <ion-label>{{timelineevent.timeline.position}} <span *ngIf="timelineevent.timeline.lanternEvent"><ion-icon
            name="book"></ion-icon> {{timelineevent.timeline.lanternEvent.name}}</span>
          </ion-label>
        </ion-item>
        <ion-item-options side="right">
          <ion-button (click)="changeTimelineEvent(timelineevent)">
            <ion-icon name="swap"></ion-icon>
          </ion-button>
          <ion-button color="danger" (click)="removeTimelineEvent(timelineevent)">
            <ion-icon name="remove-circle"></ion-icon>
          </ion-button>
        </ion-item-options>
      </ion-item-sliding>
    </ion-item-group>
  </ion-list>
</ion-content>
